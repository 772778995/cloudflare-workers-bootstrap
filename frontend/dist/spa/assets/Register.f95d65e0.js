import{r as S,j as b,o as _,m as y,e as i,I as g,q as e,F as V,Q as c,n as r,J as C,K as x,L as v}from"./index.18c85594.js";import{u as E,a as h,E as w,b as R,Q as $,i as k,c as H}from"./useSendEmail.fdc36293.js";import"./localForage.0be1d0f6.js";import"./throwError.f2bb7a95.js";var L=f=>{const{emailInputRef:n}=f,o=S({phone:"13790867170",email:"772778995@qq.com",emailCode:"000000",smsCode:"000000",psd:"123456"}),{leftSeconds:d,sendEmailCode:m,isSendEmailCodeLoading:s}=E(),u=async()=>{!await n.value.validate()||m(o.value.email,w.Register)},[p,l]=h(()=>R.post("/register/email",o.value));return{leftSeconds:d,sendEmailCodeHandler:u,isSendEmailCodeLoading:s,registerForm:o,isRegisterLoading:l,registerHandler:async()=>{await p()}}};const Q={_flex:"~"},F={_flex:"~"},I={_flex:"1"},P={_m:"l-10px"},q={_m:"l-10px"},j=b({__name:"Register",setup(f){const n=S(),{leftSeconds:o,sendEmailCodeHandler:d,isSendEmailCodeLoading:m,registerForm:s,isRegisterLoading:u,registerHandler:p}=L({emailInputRef:n});return(l,t)=>(_(),y("div",Q,[i($,{_m:"auto",_w:"80vw max-350px",_space:"y-10px",onSubmit:e(p)},{default:g(()=>[(_(),y(V,{key:0},[i(c,{ref_key:"emailInputRef",ref:n,modelValue:e(s).email,"onUpdate:modelValue":t[0]||(t[0]=a=>e(s).email=a),label:l.$t("email"),maxlength:"255",outlined:"","lazy-rules":"",rules:[a=>e(k)(a)||l.$t("Please enter your email")]},null,8,["modelValue","label","rules"]),r("div",F,[r("div",I,[i(c,{modelValue:e(s).emailCode,"onUpdate:modelValue":t[1]||(t[1]=a=>e(s).emailCode=a),label:l.$t("SMS code"),outlined:"",maxlength:"6","lazy-rules":"",rules:[a=>/\d{6}/.test(a)||l.$t("Please enter a 6-digit verification code")]},null,8,["modelValue","label","rules"])]),i(C,{_w:"170px",_m:"l-20px",_h:"56px",color:"primary",icon:"email",loading:e(o)>0||e(m),onClick:e(d)},x({default:g(()=>[r("div",P,v(l.$t("Send Email Code")),1)]),_:2},[e(o)>0?{name:"loading",fn:g(()=>[i(H),r("div",q,v(e(o)),1)]),key:"0"}:void 0]),1032,["loading","onClick"])]),i(c,{modelValue:e(s).psd,"onUpdate:modelValue":t[2]||(t[2]=a=>e(s).psd=a),label:l.$t("psd"),maxlength:"20",outlined:"","lazy-rules":"",type:"password",rules:[a=>a.length>=6||l.$t("Please enter a password of at least 6 characters")]},null,8,["modelValue","label","rules"])],64)),i(C,{loading:e(u),label:l.$t("register"),icon:"person",color:"primary",_m:"!t-20px",_w:"full",_h:"54px",type:"submit"},null,8,["loading","label"])]),_:1},8,["onSubmit"])]))}});export{j as default};
